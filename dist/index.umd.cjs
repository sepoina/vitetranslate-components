(function(o,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],n):(o=typeof globalThis<"u"?globalThis:o||self,n(o["@sepoina/vitetranslate-components"]={},o.React))})(this,function(o,n){"use strict";const f=n.createContext(null),p={langID:null};function d({predefined:t,children:s}){const[e,r]=n.useState({lang:t}),[c,i]=n.useState(null),a=u=>{r(u)};return n.useEffect(()=>{if(!e.lang||p.langID===e.lang)return;p.langID=e.lang,e.onStart&&e.onStart(!0),(async()=>{try{const m=await(await fetch(`./locale/${e.lang}.json`)).json();e.onDone&&e.onDone(!0),i({id:e.lang,table:m,proposeNewLanguage:a})}catch(l){e.onError?e.onError({error:l,inexistID:e.lang}):console.error(`Inexistant or error in language file ./locale/${e.lang}.json `),e.onDone&&e.onDone(!1);return}})()},[e.lang]),n.createElement(f.Provider,{value:c},s)}function h({"data-translate":t,t:s,c:e,a:r,children:c}){const i=n.useContext(f);return n.useMemo(()=>{var u;let a=e||s||c;if(!t||a.startsWith("_<_")&&a.endsWith("_>_")){const l=a.match(/_<_(.*?)_\/_(.*?)_>_/);if(l)t=l[1],a=l[2];else throw"errore nel servizio di traduzione, manca translate"}return(u=i==null?void 0:i.table)!=null&&u[t]?n.createElement("span",{"data-from-translate":t},r?g(i.table[t],r):i.table[t]):n.createElement("span",{"data-not-translate":t},r?g(a,r):a)},[i,r])}function g(t,s){if(s===void 0)return t;const e=Array.isArray(s)?s:[s];let r=0;return t.replace(/%s/g,()=>e[r++])}o.Translate=h,o.TranslateContainer=d,o.TranslateContext=f,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.cjs.map
